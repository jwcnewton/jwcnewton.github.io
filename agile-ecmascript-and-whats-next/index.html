<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Jonathan Newton"><link rel="alternative" href="/atom.xml" title="jwcnewton" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><title>Agile ECMAScript and What's next? - jwcnewton</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">Jonathan Newton</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">POSTS</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2019-03-01T12:58:40.000Z">March 1, 2019</time><h1 class="post__title"><a href="/agile-ecmascript-and-whats-next/">Agile ECMAScript and What's next?</a></h1><div class="post__main echo"><p>JavaScript in 2015 was a hectic time. It had been 6 years since ES5; it’s previous release had been abandoned, meaning the world hadn’t seen a core update to JavaScript in 10 years. </p>
<blockquote>
<p>ECMAScript is not the same as JavaScript, ECMAScript is the standard and JavaScript is an implementation of ECMAScript.</p>
</blockquote>
<p>The weird and wonderful release pattern of ECMAScript pre ES7:</p>
<table>
<thead>
<tr>
<th>ES Version</th>
<th>Release Date</th>
</tr>
</thead>
<tbody>
<tr>
<td> ES1</td>
<td>June 1997</td>
</tr>
<tr>
<td> ES2</td>
<td>June 1998</td>
</tr>
<tr>
<td> ES3</td>
<td>December 1999</td>
</tr>
<tr>
<td> ES4</td>
<td>Cancelled</td>
</tr>
<tr>
<td> ES5</td>
<td>December 2009</td>
</tr>
<tr>
<td> ES6 / ES2015</td>
<td>June 2015</td>
</tr>
</tbody>
</table>
<blockquote>
<p> ES =&gt; ECMAScript</p>
</blockquote>
<p>This kind of schedule was having a tole on JavaScript. The massive wait time on releases causes a big bang effect when they eventually reach maturity. Features that are not ready are postponed and don’t make it into a release, with so much time between releases this is a big deal. </p>
<p>Releases needed to be more frequent, so features that didn’t make it into the current draft wouldn’t have to wait long for the next iteration. </p>
<h2 id="TC39-Technical-Committee-39"><a href="#TC39-Technical-Committee-39" class="headerlink" title="TC39 (Technical Committee 39)"></a>TC39 (Technical Committee 39)</h2><p>TC39 is the lean evolution of ECMAScript developing new features with more collaboration and better transparency to get feedback in early (sounds pretty agile!). </p>
<p><strong>Who are TC39?</strong></p>
<p>Delegates from companies, experts, etc. (The kind of clever people that you would expect).</p>
<p><strong>What do they talk about?</strong></p>
<p>ECMAScript stuff, you get the minutes <a href="https://github.com/tc39/tc39-notes" target="_blank" rel="noopener">here</a>.</p>
<h2 id="The-process"><a href="#The-process" class="headerlink" title="The process"></a>The process</h2><p>I thought it would be interesting to show potentially new features at each stage of the TC39 process, to do some of these examples you will need to grab <a href="https://www.google.com/chrome/canary/" target="_blank" rel="noopener">Canary</a></p>
<ul>
<li><p>Stage 0: Strawman</p>
</li>
<li><p>Stage 1: Proposal</p>
</li>
<li><p>Stage 2: Draft</p>
</li>
<li><p>Stage 3: Candidate</p>
</li>
<li><p>Stage 4: Finished </p>
</li>
</ul>
<p><br></p>
<h2 id="Stage-0-Strawman"><a href="#Stage-0-Strawman" class="headerlink" title="Stage 0 - Strawman"></a>Stage 0 - Strawman</h2><p>The purpose of this stage is to get the proposal to the table. All that is required is enough documentation for a conversation around the proposed feature, although it’s not required to have code examples at this stage, they are helpful to the committee.</p>
<p>As of writing this, <a href="https://github.com/tc39/proposal-promise-any" target="_blank" rel="noopener">Promise.any</a> is in stage 0.</p>
<p>If you had multiple promised calls and the order and timing of them resolving is not important, you could use <code>Promise.any</code> as your callback handler, meaning you don’t have to wait for all the promises in a promise array to resolve.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        res(<span class="string">"Promise: 1"</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        res(<span class="string">"Promise: 2"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.any(promises).then(</span><br><span class="line">  (first) =&gt; &#123;</span><br><span class="line">    <span class="comment">// Any of the promises was fulfilled.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="comment">// All of the promises were rejected.</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="Stage-1-Proposal"><a href="#Stage-1-Proposal" class="headerlink" title="Stage 1 - Proposal"></a>Stage 1 - Proposal</h2><p>Once the feature has been promoted to stage 1, the owner of the change will make the case for the addition and describe the shape of a solution. At this point the change will be assigned a “champion”, who will advance the addition. A champion is someone from the committee, assigned to a new successful stage 0 feature to help guide it to maturity. They will write spec text and will represent the proposed features at the TC39 meetings.</p>
<p>Currently <a href="https://github.com/littledan/proposal-new-initialize" target="_blank" rel="noopener">new.initialize()</a> is in stage 1, although the repo hasn’t been updated:</p>
<blockquote>
<p><del>Status: Not yet presented at TC39; not at a stage</del></p>
</blockquote>
<p>If you read the minutes from <a href="https://github.com/tc39/tc39-notes/blob/master/es9/2019-01/jan-31.md#newinitialize-for-stage-1" target="_blank" rel="noopener">January</a>, it is currently in stage 1.</p>
<p>JavaScript allows you classes to be created that extend another class, this is great and pretty common in OOP languages.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"White"</span>; </span><br><span class="line">        <span class="keyword">this</span>.topSpeed = <span class="number">100</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedCar</span> <span class="keyword">extends</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">super</span>(); </span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"Red"</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> RedCar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car.colour);    <span class="comment">//Red</span></span><br><span class="line"><span class="built_in">console</span>.log(car.topSpeed);  <span class="comment">//100</span></span><br></pre></td></tr></table></figure>
<p>But, this can be mutated, stopping the original base class from being called from <code>RedCar</code> constructor <code>super()</code> call.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"White"</span>; </span><br><span class="line">        <span class="keyword">this</span>.topSpeed = <span class="number">100</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedCar</span> <span class="keyword">extends</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">super</span>(); </span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"Red"</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">RedCar.__proto__ = <span class="class"><span class="keyword">class</span> </span>&#123; <span class="keyword">constructor</span>() &#123; <span class="keyword">this</span>.price = <span class="number">15000</span>; &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> RedCar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car.colour);    <span class="comment">// Red</span></span><br><span class="line"><span class="built_in">console</span>.log(car.price);     <span class="comment">// 15000</span></span><br><span class="line"><span class="built_in">console</span>.log(car.topSpeed);  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>We can reconstruct our Car base class from inside our RedCar constructor, but then we can’t extend any of RedCar’s properties.  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"White"</span>; </span><br><span class="line">        <span class="keyword">this</span>.topSpeed = <span class="number">100</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedCar</span> <span class="keyword">extends</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> instance = <span class="built_in">Reflect</span>.construct(Car, [], <span class="keyword">new</span>.target);</span><br><span class="line">    instance.colour = <span class="string">"Red"</span>;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">RedCar.__proto__ = <span class="class"><span class="keyword">class</span> </span>&#123; <span class="keyword">constructor</span>() &#123; <span class="keyword">this</span>.price = <span class="number">15000</span>; &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> RedCar();</span><br><span class="line"><span class="built_in">console</span>.log(car.colour);    <span class="comment">// Red</span></span><br><span class="line"><span class="built_in">console</span>.log(car.price);     <span class="comment">// Undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(car.topSpeed);  <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<p>The solution to this problem would be to omit the <code>extends</code> on the RedCar class and instead call <code>new.initialize()</code> from inside the constructor and against a new object and return the new instance.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"White"</span>; </span><br><span class="line">        <span class="keyword">this</span>.topSpeed = <span class="number">100</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedCar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123; </span><br><span class="line">        <span class="keyword">const</span> instance = <span class="built_in">Reflect</span>.construct(Car, [], <span class="keyword">new</span>.target);</span><br><span class="line">        <span class="keyword">new</span>.initialize(instance);</span><br><span class="line">        <span class="keyword">this</span>.colour = <span class="string">"Red"</span>; </span><br><span class="line">        <span class="keyword">return</span> instance;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">RedCar.__proto__ = <span class="class"><span class="keyword">class</span> </span>&#123; <span class="keyword">constructor</span>() &#123; <span class="keyword">this</span>.price = <span class="number">15000</span>; &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> RedCar();</span><br><span class="line"><span class="built_in">console</span>.log(car.colour);    <span class="comment">// Red</span></span><br><span class="line"><span class="built_in">console</span>.log(car.price);     <span class="comment">// 15000</span></span><br><span class="line"><span class="built_in">console</span>.log(car.topSpeed);  <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>This theoretically would work, but since this is at stage 1, the syntax and semantics could change.</p>
</blockquote>
<h2 id="Stage-2-Draft"><a href="#Stage-2-Draft" class="headerlink" title="Stage 2 - Draft"></a>Stage 2 - Draft</h2><p>Once the feature has been promoted to stage 2, the precise syntax and semantics are expected to be drafted using formal spec language. Once a feature gets to this stage, it is more than likely that it will be developed into the ECMAScript standards.</p>
<p><a href="https://github.com/tc39/proposal-promise-allSettled" target="_blank" rel="noopener">Promise.allSettled</a> is a new feature set as stage 2.</p>
<p>When awaiting an array of promises you don’t know which have resolved and which have been rejected (if any). If we don’t filter the promise results we can’t handle some of the promises resolving and some of them failing:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        res(<span class="string">"Promise: 1"</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        rej(<span class="string">"Promise: 2"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all(promises).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="built_in">console</span>.log(res); <span class="comment">//Nothing in here</span></span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">rej</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="built_in">console</span>.log(rej); <span class="comment">//Promise: 2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>To get round this, it’s common to see a filter resolve function that will return an object which contains a status property and a result of each promise in the promise array.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        res(<span class="string">"Promise: 1"</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        rej(<span class="string">"Promise: 2"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Resolver</span>(<span class="params">promise</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> promise.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">status</span>: <span class="string">"resolved"</span>, <span class="attr">value</span>: res &#125;; </span><br><span class="line">    &#125;).catch(<span class="function">(<span class="params">rej</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">status</span>: <span class="string">"rejected"</span>, <span class="attr">value</span>: rej &#125;; </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all(promises.map(Resolver)).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> resolvedPromises = result.filter(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> x.status == <span class="string">'resolved'</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> rejectedPromises = result.filter(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> x.status == <span class="string">'rejected'</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    <span class="built_in">console</span>.log(resolvedPromises[<span class="number">0</span>].value); <span class="comment">//Promise: 1</span></span><br><span class="line">    <span class="built_in">console</span>.log(rejectedPromises[<span class="number">0</span>].value); <span class="comment">//Promise: 2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>This can be common if you can handle some promises resolving, but not all of them. The proposed solution we would use <code>Promise.allSettled</code> to mitigate this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.allSettled(promises).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> resolvedPromises = result.filter(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> x.status == <span class="string">'resolved'</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> rejectedPromises = result.filter(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> x.status == <span class="string">'rejected'</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    <span class="built_in">console</span>.log(resolvedPromises[<span class="number">0</span>].value); <span class="comment">//Promise: 1</span></span><br><span class="line">    <span class="built_in">console</span>.log(rejectedPromises[<span class="number">0</span>].value); <span class="comment">//Promise: 2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Stage-3-Candidate"><a href="#Stage-3-Candidate" class="headerlink" title="Stage 3 - Candidate"></a>Stage 3 - Candidate</h2><p>For a feature to enter stage 3, all designated reviewers have signed off on the current spec text and all ECMAScript editors have signed off on the current spec text. All work is complete and any addition changes to the spec or api would require significant reviewing.</p>
<p><a href="https://github.com/tc39/proposal-private-methods" target="_blank" rel="noopener">Private Getters and Setters</a> is currently sat in stage 3 and has some pretty cool syntax.</p>
<blockquote>
<p>You can start to play with private getters and setters in Canary</p>
</blockquote>
<p>In my opinion, the reason this feature is needed, is to allow developers to adhere to SOLID principles. The open/closed principle is simple - “open for modification, closed for extension”. Some properties are better kept internal for safety and for clear API definitions.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedCar</span> </span>&#123;</span><br><span class="line">    #colour = "Red"; //Private</span><br><span class="line"></span><br><span class="line">    getColour() &#123;</span><br><span class="line">        return this.#colour;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> RedCar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car.getColour()); <span class="comment">//Red</span></span><br></pre></td></tr></table></figure>
<p>To declare a property in a class as private, we put a <code>#</code> before the property name. Trying to set the value on a private field will throw an exception.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedCar</span> </span>&#123;</span><br><span class="line">    #colour = "Red";</span><br><span class="line"></span><br><span class="line">    getColour() &#123;</span><br><span class="line">        return this.#colour;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> RedCar();</span><br><span class="line"></span><br><span class="line">car.#colour = "Yellow"; </span><br><span class="line"><span class="comment">//Uncaught SyntaxError: Undefined private field #colour: must be declared in an enclosing class</span></span><br></pre></td></tr></table></figure>
<h2 id="Stage-4-Finished"><a href="#Stage-4-Finished" class="headerlink" title="Stage 4 - Finished"></a>Stage 4 - Finished</h2><p>Once a feature makes it to this stage, it indicates that the addition is ready for inclusion in the formal ECMAScript standard. It’s a big deal! For it to to be sent out with the next update, all <a href="https://github.com/tc39/test262" target="_blank" rel="noopener">Test262</a> acceptance tests have to been written for mainline usage scenarios and all ECMAScript editors have signed off on the pull request. Features at this stage are often being implemented in a polyfill, awaiting it’s official release.</p>
<p>Currently pending an official release is <a href="https://github.com/tc39/proposal-object-from-entries" target="_blank" rel="noopener">Object.fromEntries</a>. This static method will transform a list of key-value pairs into an object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> results = [[<span class="string">'1'</span>, <span class="string">'John'</span>], [<span class="string">'2'</span>, <span class="string">'David'</span>]];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resultObj = <span class="built_in">Object</span>.fromEntries(results);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(resultObj); <span class="comment">//&#123; 1: "John", 2: "David" &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Whats-Next"><a href="#Whats-Next" class="headerlink" title="Whats Next?"></a>Whats Next?</h2><p>Since ES5 ECMAScript changed it’s release process, it has also changed it’s version naming. They moved away from ES{X} and now use ES{Year}. So you will see new revisions named ES2015, ES2016, ES2017 …</p>
<p>You can keep up with developing changes in ECMAScript and what to expect in JavaScript <a href="https://github.com/tc39/proposals" target="_blank" rel="noopener">here</a>.</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/JavaScript/">JavaScript</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">&copy; 2018-2019 Jonathan Newton</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>